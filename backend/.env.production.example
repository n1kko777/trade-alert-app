# =============================================================================
# TradePulse Backend - Production Environment Variables
# =============================================================================
# Copy this file to .env and configure all required values before deployment.
# NEVER commit the actual .env file with real secrets to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Port the API server listens on (inside container)
PORT=3000

# Environment mode (must be 'production' for production deployments)
NODE_ENV=production

# Log level: fatal, error, warn, info, debug, trace
# Use 'info' for production, 'debug' only for troubleshooting
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Domain Configuration
# -----------------------------------------------------------------------------
# Your API domain (used for Traefik routing and CORS)
DOMAIN=api.tradepulse.app

# CORS allowed origins (comma-separated for multiple)
# Include your mobile app's domain or use * for mobile apps
CORS_ORIGIN=https://tradepulse.app

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
# Database credentials (used by docker-compose to create the database)
DB_USER=tradepulse
DB_PASSWORD=CHANGE_THIS_TO_A_SECURE_PASSWORD_MIN_32_CHARS

# Database name
DB_NAME=tradepulse

# Full DATABASE_URL (constructed from above, don't change unless using external DB)
# For external managed database, replace with your connection string
# DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@postgres:5432/${DB_NAME}

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# Redis password (used for authentication)
REDIS_PASSWORD=CHANGE_THIS_TO_A_SECURE_PASSWORD_MIN_32_CHARS

# Full REDIS_URL (constructed from above, don't change unless using external Redis)
# For external managed Redis, replace with your connection string
# REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# -----------------------------------------------------------------------------
# JWT Configuration (CRITICAL - Generate secure random values!)
# -----------------------------------------------------------------------------
# Access token secret (min 32 characters)
# Generate with: openssl rand -base64 48
JWT_SECRET=CHANGE_THIS_GENERATE_WITH_openssl_rand_base64_48

# Refresh token secret (min 32 characters, must be different from JWT_SECRET)
# Generate with: openssl rand -base64 48
JWT_REFRESH_SECRET=CHANGE_THIS_GENERATE_WITH_openssl_rand_base64_48

# -----------------------------------------------------------------------------
# OpenAI Configuration (Optional - for AI Analysis features)
# -----------------------------------------------------------------------------
# Your OpenAI API key (starts with sk-)
# Get one at: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Maximum requests per minute per IP address
RATE_LIMIT_MAX=100

# -----------------------------------------------------------------------------
# Security Notes
# -----------------------------------------------------------------------------
# 1. All passwords should be at least 32 characters with mixed case, numbers, symbols
# 2. JWT secrets should be generated using cryptographically secure random generators
# 3. Rotate secrets periodically (at least every 90 days)
# 4. Use a secrets manager (like HashiCorp Vault, AWS Secrets Manager) in production
# 5. Enable database SSL in production (add ?ssl=true to DATABASE_URL)
# 6. Consider using managed database and Redis services for high availability
